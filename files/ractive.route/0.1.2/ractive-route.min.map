{"version":3,"file":"ractive-route.min.js","sources":["ractive-route.js"],"names":["factory","module","exports","require","define","amd","window","Ractive","Route","pattern","Handler","observe","router","this","map","parsePattern","regExp","patternToRegExp","strictRegExp","patternToStrictRegExp","isComponent","extend","extendHandler","assign","qs","hash","state","allObserved","concat","view","init","options","data","set","_super","match","name","substr","RegExp","patternToRegExpString","replace","Router","basePath","el","history","strictMode","linksWatcher","stateWatcher","route","routes","uri","shouldDispatch","oldUri","newUri","path","length","object","i","c","arguments","x","hasOwnProperty","undefined","compact","collection","pick","value","isEmpty","Object","keys","joinPaths","Array","prototype","slice","call","join","parents","nodeName","toLowerCase","parentNode","parseHash","parsed","JSON","parse","decodeURIComponent","e","parseJSON","string","parseUri","parts","protocol","host","parseQS","index","indexOf","pairs","split","pair","scrollTo","id","document","getElementById","scrollBy","getBoundingClientRect","top","stringify","stringifyHash","encodeURIComponent","stringifyQS","destroy","teardown","getState","get","_this","parsePath","updating","update","request","strict","test","addRoute","push","buildHash","preserve","location","buildQS","merge","search","dispatch","redirect","reload","defaults","noHistory","getUri","pathname","unwatchLinks","body","removeEventListener","unwatchState","pathChange","pushState","replaceState","watchLinks","hostname","addEventListener","target","href","getAttribute","classList","contains","preventDefault","watchState"],"mappings":"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"}