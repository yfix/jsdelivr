{"version":3,"file":"ractive-route.min.js","sources":["ractive-route.js"],"names":["factory","module","exports","require","define","amd","window","Ractive","Route","pattern","Handler","observe","router","this","map","parsePattern","regExp","patternToRegExp","strictRegExp","patternToStrictRegExp","extendHandler","assign","qs","hash","state","allObserved","concat","view","extend","init","options","data","set","_super","match","name","substr","RegExp","patternToRegExpString","replace","Router","basePath","el","history","strictMode","linksWatcher","stateWatcher","route","routes","uri","shouldDispatch","oldUri","newUri","path","length","object","i","c","arguments","x","hasOwnProperty","undefined","compact","collection","pick","value","isEmpty","Object","keys","joinPaths","Array","prototype","slice","call","join","parents","nodeName","toLowerCase","parentNode","parseHash","parsed","JSON","parse","decodeURIComponent","e","parseJSON","string","parseUri","parts","protocol","host","parseQS","index","indexOf","pairs","split","pair","scrollTo","id","document","getElementById","scrollBy","getBoundingClientRect","top","stringify","stringifyHash","encodeURIComponent","stringifyQS","destroy","teardown","getState","get","_this","parsePath","updating","update","request","strict","test","addRoute","push","buildHash","preserve","location","buildQS","merge","search","dispatch","redirect","reload","defaults","noHistory","getUri","pathname","unwatchLinks","body","removeEventListener","unwatchState","pathChange","pushState","replaceState","watchLinks","hostname","addEventListener","target","href","getAttribute","classList","contains","preventDefault","watchState"],"mappings":"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"}