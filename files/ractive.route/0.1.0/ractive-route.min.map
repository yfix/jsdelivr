{"version":3,"file":"ractive-route.min.js","sources":["ractive-route.js"],"names":["factory","module","exports","require","define","amd","window","Ractive","Route","pattern","Handler","observe","router","this","map","parsePattern","regExp","patternToRegExp","strictRegExp","patternToStrictRegExp","extendHandler","assign","qs","hash","state","allObserved","concat","view","extend","init","options","data","set","_super","match","name","substr","RegExp","patternToRegExpString","replace","Router","basePath","el","history","strictMode","linksWatcher","stateWatcher","route","routes","uri","shouldDispatch","oldUri","newUri","path","length","object","i","c","arguments","x","hasOwnProperty","undefined","compact","collection","pick","value","isEmpty","Object","keys","joinPaths","parents","nodeName","toLowerCase","parentNode","parseHash","parsed","JSON","parse","decodeURIComponent","e","parseJSON","string","parseUri","parts","protocol","host","parseQS","index","indexOf","pairs","split","pair","scrollTo","id","document","getElementById","scrollBy","getBoundingClientRect","top","stringify","stringifyHash","encodeURIComponent","stringifyQS","prototype","destroy","teardown","getState","get","_this","parsePath","join","updating","update","request","strict","test","addRoute","push","buildHash","preserve","location","buildQS","merge","search","dispatch","redirect","reload","defaults","noHistory","getUri","pathname","unwatchLinks","body","removeEventListener","unwatchState","pathChange","pushState","replaceState","watchLinks","hostname","addEventListener","target","href","getAttribute","classList","contains","preventDefault","watchState"],"mappings":"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"}