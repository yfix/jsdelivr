(function(e){e.fn.scrollbox=function(t){var n={linear:false,startDelay:2,delay:3,step:5,speed:32,switchItems:1,direction:"vertical",distance:"auto",autoPlay:true,onMouseOverPause:true,paused:false,queue:null,listElement:"ul",listItemElement:"li"};t=e.extend(n,t);t.scrollOffset=t.direction==="vertical"?"scrollTop":"scrollLeft";if(t.queue){t.queue=e("#"+t.queue)}return this.each(function(){var n=e(this),r,i=null,s=null,o=false,u,a,f,l,c,h,p;if(t.onMouseOverPause){n.bind("mouseover",function(){o=true});n.bind("mouseout",function(){o=false})}r=n.children(t.listElement+":first-child");l=function(){if(o){return}var e,u,f,l,c;e=r.children(t.listItemElement+":first-child");l=t.distance!=="auto"?t.distance:t.direction==="vertical"?e.outerHeight(true):e.outerWidth(true);if(!t.linear){c=Math.max(3,parseInt((l-n[0][t.scrollOffset])*.3,10));f=Math.min(n[0][t.scrollOffset]+c,l)}else{f=Math.min(n[0][t.scrollOffset]+t.step,l)}n[0][t.scrollOffset]=f;if(f>=l){for(u=0;u<t.switchItems;u++){if(t.queue&&t.queue.find(t.listItemElement).length>0){r.append(t.queue.find(t.listItemElement)[0]);r.children(t.listItemElement+":first-child").remove()}else{r.append(r.children(t.listItemElement+":first-child"))}}n[0][t.scrollOffset]=0;clearInterval(i);if(t.autoPlay){s=setTimeout(a,t.delay*1e3)}}};c=function(){if(o){return}var e,u,f,l,c,h;if(n[0][t.scrollOffset]===0){f=r.children(t.listItemElement).length;for(u=0;u<t.switchItems;u++){r.children(t.listItemElement+":last-child").insertBefore(r.children(t.listItemElement+":first-child"))}e=r.children(t.listItemElement+":first-child");c=t.distance!=="auto"?t.distance:t.direction==="vertical"?e.height():e.width();n[0][t.scrollOffset]=c}if(!t.linear){h=Math.max(3,parseInt(n[0][t.scrollOffset]*.3,10));l=Math.max(n[0][t.scrollOffset]-h,0)}else{l=Math.max(n[0][t.scrollOffset]-t.step,0)}n[0][t.scrollOffset]=l;if(l===0){clearInterval(i);if(t.autoPlay){s=setTimeout(a,t.delay*1e3)}}};a=function(){clearInterval(i);i=setInterval(l,t.speed)};h=function(){t.autoPlay=true;o=false;clearInterval(i);i=setInterval(l,t.speed)};p=function(){o=true};u=function(){clearInterval(i);i=setInterval(c,t.speed)};f=function(e){t.delay=e||t.delay;clearTimeout(s);if(t.autoPlay){s=setTimeout(a,t.delay*1e3)}};if(t.autoPlay){s=setTimeout(a,t.startDelay*1e3)}n.bind("resetClock",function(e){f(e)});n.bind("forward",function(){clearTimeout(s);a()});n.bind("pauseHover",function(){p()});n.bind("forwardHover",function(){h()});n.bind("backward",function(){clearTimeout(s);u()});n.bind("speedUp",function(e){if(typeof e==="undefined"){e=Math.max(1,parseInt(t.speed/2,10))}t.speed=e});n.bind("speedDown",function(e){if(typeof e==="undefined"){e=t.speed*2}t.speed=e})})}})(jQuery)