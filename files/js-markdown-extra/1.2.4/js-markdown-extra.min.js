function Markdown(text){var parser;if("undefined"==typeof arguments.callee.parser){parser=eval("new "+MARKDOWN_PARSER_CLASS+"()");parser.init();arguments.callee.parser=parser}else{parser=arguments.callee.parser}return parser.transform(text)}function Markdown_Parser(){this.nested_brackets_depth=6;this.nested_url_parenthesis_depth=4;this.escape_chars="\\\\`*_{}[]()>#+-.!";this.document_gamut=[["stripLinkDefinitions",20],["runBasicBlockGamut",30]];this.block_gamut=[["doHeaders",10],["doHorizontalRules",20],["doLists",40],["doCodeBlocks",50],["doBlockQuotes",60]];this.span_gamut=[["parseSpan",-30],["doImages",10],["doAnchors",20],["doAutoLinks",30],["encodeAmpsAndAngles",40],["doItalicsAndBold",50],["doHardBreaks",60]];this.em_relist=[["","(?:(^|[^\\*])(\\*)(?=[^\\*])|(^|[^_])(_)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["*","((?:\\S|^)[^\\*])(\\*)(?!\\*)"],["_","((?:\\S|^)[^_])(_)(?!_)"]];this.strong_relist=[["","(?:(^|[^\\*])(\\*\\*)(?=[^\\*])|(^|[^_])(__)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["**","((?:\\S|^)[^\\*])(\\*\\*)(?!\\*)"],["__","((?:\\S|^)[^_])(__)(?!_)"]];this.em_strong_relist=[["","(?:(^|[^\\*])(\\*\\*\\*)(?=[^\\*])|(^|[^_])(___)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["***","((?:\\S|^)[^\\*])(\\*\\*\\*)(?!\\*)"],["___","((?:\\S|^)[^_])(___)(?!_)"]]}function MarkdownExtra_Parser(){this.fn_id_prefix="";this.fn_link_title=MARKDOWN_FN_LINK_TITLE;this.fn_backlink_title=MARKDOWN_FN_BACKLINK_TITLE;this.fn_link_class=MARKDOWN_FN_LINK_CLASS;this.fn_backlink_class=MARKDOWN_FN_BACKLINK_CLASS;this.predef_abbr={};this.footnotes={};this.footnotes_ordered=[];this.abbr_desciptions={};this.abbr_word_re="";this.footnote_counter=1;this.block_tags_re="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|address|form|fieldset|iframe|hr|legend";this.context_block_tags_re="script|noscript|math|ins|del";this.contain_span_tags_re="p|h[1-6]|li|dd|dt|td|th|legend|address";this.clean_tags_re="script|math";this.auto_close_tags_re="hr|img";this.em_relist=[["","(?:(^|[^\\*])(\\*)(?=[^\\*])|(^|[^a-zA-Z0-9_])(_)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["*","((?:\\S|^)[^\\*])(\\*)(?!\\*)"],["_","((?:\\S|^)[^_])(_)(?![a-zA-Z0-9_])"]];this.strong_relist=[["","(?:(^|[^\\*])(\\*\\*)(?=[^\\*])|(^|[^a-zA-Z0-9_])(__)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["**","((?:\\S|^)[^\\*])(\\*\\*)(?!\\*)"],["__","((?:\\S|^)[^_])(__)(?![a-zA-Z0-9_])"]];this.em_strong_relist=[["","(?:(^|[^\\*])(\\*\\*\\*)(?=[^\\*])|(^|[^a-zA-Z0-9_])(___)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["***","((?:\\S|^)[^\\*])(\\*\\*\\*)(?!\\*)"],["___","((?:\\S|^)[^_])(___)(?![a-zA-Z0-9_])"]];this.escape_chars+=":|";this.document_gamut.push(["doFencedCodeBlocks",5]);this.document_gamut.push(["stripFootnotes",15]);this.document_gamut.push(["stripAbbreviations",25]);this.document_gamut.push(["appendFootnotes",50]);this.block_gamut.push(["doFencedCodeBlocks",5]);this.block_gamut.push(["doTables",15]);this.block_gamut.push(["doDefLists",45]);this.span_gamut.push(["doFootnotes",5]);this.span_gamut.push(["doAbbreviations",70])}var MARKDOWN_VERSION="1.0.1o";var MARKDOWNEXTRA_VERSION="1.2.5";var MARKDOWN_EMPTY_ELEMENT_SUFFIX=" />";var MARKDOWN_TAB_WIDTH=4;var MARKDOWN_FN_LINK_TITLE="";var MARKDOWN_FN_BACKLINK_TITLE="";var MARKDOWN_FN_LINK_CLASS="";var MARKDOWN_FN_BACKLINK_CLASS="";var MARKDOWN_WP_POSTS=true;var MARKDOWN_WP_COMMENTS=true;MARKDOWN_PARSER_CLASS="MarkdownExtra_Parser";Markdown_Parser.prototype.init=function(){function n(e,t){e=e[1];t=t[1];return e>t?1:e<t?-1:0}this.prepareItalicsAndBold();this.nested_brackets_re="(?:[^\\]]*?)";this.nested_url_parenthesis_re="(?:[^\\)\\s]*?)";var e=[];for(var t=0;t<this.escape_chars.length;t++){e.push(this._php_preg_quote(this.escape_chars.charAt(t)))}this.escape_chars_re="["+e.join("")+"]";this.empty_element_suffix=MARKDOWN_EMPTY_ELEMENT_SUFFIX;this.tab_width=MARKDOWN_TAB_WIDTH;this.no_markup=false;this.no_entities=false;this.predef_urls={};this.predef_titles={};this.document_gamut.sort(n);this.block_gamut.sort(n);this.span_gamut.sort(n);this.urls={};this.titles={};this.html_hashes={};this.in_anchor=false};Markdown_Parser.prototype.__wrapSTXETX__=function(e){if(e.charAt(0)!=""){e=""+e}if(e.charAt(e.length-1)!=""){e=e+""}return e};Markdown_Parser.prototype.__unwrapSTXETX__=function(e){if(e.charAt(0)==""){e=e.substr(1)}if(e.charAt(e.length-1)==""){e=e.substr(0,e.length-1)}return e};Markdown_Parser.prototype._php_preg_quote=function(e){if(!arguments.callee.sRE){arguments.callee.sRE=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}\\)/g}return e.replace(arguments.callee.sRE,"\\$1")};Markdown_Parser.prototype._php_str_repeat=function(e,t){var n=e;for(var r=1;r<t;r++){n+=e}return n};Markdown_Parser.prototype._php_trim=function(e,t){var n=t||" 	\n\r";return e.replace(new RegExp("^["+n+"]*|["+n+"]*$","g"),"")};Markdown_Parser.prototype._php_rtrim=function(e,t){var n=t||" 	\n\r";return e.replace(new RegExp("["+n+"]*$","g"),"")};Markdown_Parser.prototype._php_htmlspecialchars_ENT_NOQUOTES=function(e){return e.replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;")};Markdown_Parser.prototype.setup=function(){this.urls=this.predef_urls;this.titles=this.predef_titles;this.html_hashes={};this.in_anchor=false};Markdown_Parser.prototype.teardown=function(){this.urls={};this.titles={};this.html_hashes={}};Markdown_Parser.prototype.transform=function(e){this.setup();e=e.replace(/^\xEF\xBB\xBF|\x1A/,"");e=e.replace(/\r\n?/g,"\n",e);e+="\n\n";e=this.detab(e);e=this.hashHTMLBlocks(e);e=e.replace(/^[ ]+$/m,"");for(var t=0;t<this.document_gamut.length;t++){var n=this[this.document_gamut[t][0]];if(n){e=n.call(this,e)}else{console.log(this.document_gamut[t][0]+" not implemented")}}this.teardown();return e+"\n"};Markdown_Parser.prototype.hashHTMLBlocks=function(e){if(this.no_markup){return e}var t=this.tab_width-1;var n="ins|del";var r="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|address|"+"script|noscript|form|fieldset|iframe|math";var i=4;var s="(?:"+"\\s"+"(?:"+'[^>"/]+'+"|"+"/+(?!>)"+"|"+'"[^"]*"'+"|"+"'[^']*'"+")*"+")?";var o=this._php_str_repeat("(?:"+"[^<]+"+"|"+"<\\2"+s+"(?:"+"/>"+"|"+">",i)+".*?"+this._php_str_repeat("</\\2\\s*>"+")"+"|"+"<(?!/\\2\\s*>)"+")*",i);var u=o.replace("\\2","\\3");var a=new RegExp("(?:"+"(?:"+"(?:\\n\\n)"+"|"+"(?:\\x02)\\n?"+")"+"("+"[ ]{0,"+t+"}"+"<("+r+")"+s+">"+o+"</\\2>"+"[ ]*"+"(?=\\n+|\\n*\\x03)"+"|"+"[ ]{0,"+t+"}"+"<("+n+")"+s+">[ ]*\\n"+u+"</\\3>"+"[ ]*"+"(?=\\n+|\\n*\\x03)"+"|"+"[ ]{0,"+t+"}"+"<(hr)"+s+"/?>"+"[ ]*"+"(?=\\n{2,}|\\n*\\x03)"+"|"+"[ ]{0,"+t+"}"+"(?:"+"<!--.*?-->"+")"+"[ ]*"+"(?=\\n{2,}|\\n*\\x03)"+"|"+"[ ]{0,"+t+"}"+"(?:"+"<([?%])"+".*?"+"\\2>"+")"+"[ ]*"+"(?=\\n{2,}|\\n*\\x03)"+")"+")","mig");var f=this;e=this.__wrapSTXETX__(e);e=e.replace(a,function(e,t){var n=f.hashBlock(t);return"\n\n"+n+"\n\n"});e=this.__unwrapSTXETX__(e);return e};Markdown_Parser.prototype.hashPart=function(e,t){if("undefined"===typeof t){t="X"}e=this.unhash(e);if("undefined"===typeof arguments.callee.i){arguments.callee.i=0}var n=t+""+ ++arguments.callee.i+t;this.html_hashes[n]=e;return n};Markdown_Parser.prototype.hashBlock=function(e){return this.hashPart(e,"B")};Markdown_Parser.prototype.stripLinkDefinitions=function(e){var t=this.tab_width-1;var n=this;e=this.__wrapSTXETX__(e);e=e.replace(new RegExp("^[ ]{0,"+t+"}\\[(.+)\\][ ]?:"+"[ ]*"+"\\n?"+"[ ]*"+"(?:"+"<(.+?)>"+"|"+"(\\S+?)"+")"+"[ ]*"+"\\n?"+"[ ]*"+"(?:"+'["\\(]'+"(.*?)"+'["\\)]'+"[ ]*"+")?"+"(?:\\n+|\\n*(?=\\x03))","mg"),function(e,t,r,i,s){var o=t.toLowerCase();var u=r?r:i;n.urls[o]=u;n.titles[o]=s;return""});e=this.__unwrapSTXETX__(e);return e};Markdown_Parser.prototype.runBlockGamut=function(e){e=this.hashHTMLBlocks(e);return this.runBasicBlockGamut(e)};Markdown_Parser.prototype.runBasicBlockGamut=function(e){for(var t=0;t<this.block_gamut.length;t++){var n=this[this.block_gamut[t][0]];if(n){e=n.call(this,e)}else{console.log(this.block_gamut[t][0]+" not implemented")}}e=this.formParagraphs(e);return e};Markdown_Parser.prototype.doHorizontalRules=function(e){var t=this;return e.replace(new RegExp("^[ ]{0,3}"+"([-\\*_])"+"(?:"+"[ ]{0,2}"+"\\1"+"){2,}"+"[ ]*"+"$","mg"),function(e){return"\n"+t.hashBlock("<hr"+t.empty_element_suffix)+"\n"})};Markdown_Parser.prototype.runSpanGamut=function(e){for(var t=0;t<this.span_gamut.length;t++){var n=this[this.span_gamut[t][0]];if(n){e=n.call(this,e)}else{console.log(this.span_gamut[t][0]+" not implemented")}}return e};Markdown_Parser.prototype.doHardBreaks=function(e){var t=this;return e.replace(/ {2,}\n/mg,function(e){return t.hashPart("<br"+t.empty_element_suffix+"\n")})};Markdown_Parser.prototype.doAnchors=function(e){if(this.in_anchor)return e;this.in_anchor=true;var t=this;var n=function(e,n,r,i){if(typeof i!=="string"||i===""){i=r}i=i.toLowerCase();i=i.replace(/[ ]?\n/," ");var s;if("undefined"!==typeof t.urls[i]){var o=t.urls[i];o=t.encodeAttribute(o);s='<a href="'+o+'"';if("undefined"!==typeof t.titles[i]){var u=t.titles[i];u=t.encodeAttribute(u);s+=' title="'+u+'"'}r=t.runSpanGamut(r);s+=">"+r+"</a>";s=t.hashPart(s)}else{s=n}return s};e=e.replace(new RegExp("("+"\\["+"("+this.nested_brackets_re+")"+"\\]"+"[ ]?"+"(?:\\n[ ]*)?"+"\\["+"(.*?)"+"\\]"+")","mg"),n);e=e.replace(new RegExp("("+"\\["+"("+this.nested_brackets_re+")"+"\\]"+"\\("+"[ \\n]*"+"(?:"+"<(.+?)>"+"|"+"("+this.nested_url_parenthesis_re+")"+")"+"[ \\n]*"+"("+"(['\"])"+"(.*?)"+"\\6"+"[ \\n]*"+")?"+"\\)"+")","mg"),function(e,n,r,i,s,o,u,a){r=t.runSpanGamut(r);var f=i?i:s;f=t.encodeAttribute(f);var l='<a href="'+f+'"';if("undefined"!==typeof a&&a!==""){a=t.encodeAttribute(a);l+=' title="'+a+'"'}r=t.runSpanGamut(r);l+=">"+r+"</a>";return t.hashPart(l)});e=e.replace(new RegExp("("+"\\["+"([^\\[\\]]+)"+"\\]"+")","mg"),n);this.in_anchor=false;return e};Markdown_Parser.prototype.doImages=function(e){var t=this;e=e.replace(new RegExp("("+"!\\["+"("+this.nested_brackets_re+")"+"\\]"+"[ ]?"+"(?:\\n[ ]*)?"+"\\["+"(.*?)"+"\\]"+")","mg"),function(e,n,r,i){i=i.toLowerCase();if(typeof i!=="string"||i===""){i=r.toLowerCase()}r=t.encodeAttribute(r);var s;if("undefined"!==typeof t.urls[i]){var o=t.encodeAttribute(t.urls[i]);s='<img src="'+o+'" alt="'+r+'"';if("undefined"!==typeof t.titles[i]){var u=t.titles[i];u=t.encodeAttribute(u);s+=' title="'+u+'"'}s+=t.empty_element_suffix;s=t.hashPart(s)}else{s=n}return s});e=e.replace(new RegExp("("+"!\\["+"("+this.nested_brackets_re+")"+"\\]"+"\\s?"+"\\("+"[ \\n]*"+"(?:"+"<(\\S*)>"+"|"+"("+this.nested_url_parenthesis_re+")"+")"+"[ \\n]*"+"("+"(['\"])"+"(.*?)"+"\\6"+"[ \\n]*"+")?"+"\\)"+")","mg"),function(e,n,r,i,s,o,u,a){var f=i?i:s;r=t.encodeAttribute(r);f=t.encodeAttribute(f);var l='<img src="'+f+'" alt="'+r+'"';if("undefined"!==typeof a&&a!==""){a=t.encodeAttribute(a);l+=' title="'+a+'"'}l+=t.empty_element_suffix;return t.hashPart(l)});return e};Markdown_Parser.prototype.doHeaders=function(e){var t=this;e=e.replace(/^(.+?)[ ]*\n(=+|-+)[ ]*\n+/mg,function(e,n,r){if(r=="-"&&n.match(/^-(?: |$)/)){return e}var i=r.charAt(0)=="="?1:2;var s="<h"+i+">"+t.runSpanGamut(n)+"</h"+i+">";return"\n"+t.hashBlock(s)+"\n\n"});e=e.replace(new RegExp("^(\\#{1,6})"+"[ ]*"+"(.+?)"+"[ ]*"+"\\#*"+"\\n+","mg"),function(e,n,r){var i=n.length;var s="<h"+i+">"+t.runSpanGamut(r)+"</h"+i+">";return"\n"+t.hashBlock(s)+"\n\n"});return e};Markdown_Parser.prototype.doLists=function(e){var t=this.tab_width-1;var n="[\\*\\+-]";var r="\\d+[\\.]";var i="(?:"+n+"|"+r+")";var s=this;var o=function(e,t,i,o,u){var a=u.match(n)?"ul":"ol";var f=a=="ul"?n:r;t+="\n";var l=s.processListItems(t,f);l=s.hashBlock("<"+a+">\n"+l+"</"+a+">");return"\n"+l+"\n\n"};var u=[[n,r],[r,n]];for(var a=0;a<u.length;a++){var f=u[a][0];var l=u[a][1];var c="("+"("+"([ ]{0,"+t+"})"+"("+f+")"+"[ ]+"+")"+"[\\s\\S]+?"+"("+"(?=\\x03)"+"|"+"\\n{2,}"+"(?=\\S)"+"(?!"+"[ ]*"+f+"[ ]+"+")"+"|"+"(?="+"\\n"+"\\3"+l+"[ ]+"+")"+")"+")";e=this.__wrapSTXETX__(e);if(this.list_level){e=e.replace(new RegExp("^"+c,"mg"),o)}else{e=e.replace(new RegExp("(?:(?=\\n)\\n|\\x02\\n?)"+c,"mg"),o)}e=this.__unwrapSTXETX__(e)}return e};Markdown_Parser.prototype.processListItems=function(e,t){if("undefined"===typeof this.list_level){this.list_level=0}this.list_level++;e=this.__wrapSTXETX__(e);e=e.replace(/\n{2,}(?=\x03)/m,"\n");e=this.__unwrapSTXETX__(e);var n=this;e=this.__wrapSTXETX__(e);e=e.replace(new RegExp("(\\n)?"+"([ ]*)"+"("+t+"(?:[ ]+|(?=\\n))"+")"+"([\\s\\S]*?)"+"(?:(\\n+(?=\\n))|\\n)"+"(?=\\n*(\\x03|\\2("+t+")(?:[ ]+|(?=\\n))))","gm"),function(e,t,r,i,s,o){if(t||o||s.match(/\n{2,}/)){s=r+n._php_str_repeat(" ",i.length)+s;s=n.runBlockGamut(n.outdent(s)+"\n")}else{s=n.doLists(n.outdent(s));s=s.replace(/\n+$/m,"");s=n.runSpanGamut(s)}return"<li>"+s+"</li>\n"});e=this.__unwrapSTXETX__(e);this.list_level--;return e};Markdown_Parser.prototype.doCodeBlocks=function(e){var t=this;e=this.__wrapSTXETX__(e);e=e.replace(new RegExp("(?:\\n\\n|(?=\\x02)\\n?)"+"("+"(?:^"+"[ ]{"+this.tab_width+",}"+".*\\n+"+")+"+")"+"((?=[ ]{0,"+this.tab_width+"}\\S)|(?:\\n*(?=\\x03)))","mg"),function(e,n){n=t.outdent(n);n=t._php_htmlspecialchars_ENT_NOQUOTES(n);n=t.__wrapSTXETX__(n);n=n.replace(/(?=\x02)\n+|\n+(?=\x03)/g,"");n=t.__unwrapSTXETX__(n);n="<pre><code>"+n+"\n</code></pre>";return"\n\n"+t.hashBlock(n)+"\n\n"});e=this.__unwrapSTXETX__(e);return e};Markdown_Parser.prototype.makeCodeSpan=function(e){e=this._php_htmlspecialchars_ENT_NOQUOTES(this._php_trim(e));return this.hashPart("<code>"+e+"</code>")};Markdown_Parser.prototype.prepareItalicsAndBold=function(){this.em_strong_prepared_relist={};for(var e=0;e<this.em_relist.length;e++){var t=this.em_relist[e][0];var n=this.em_relist[e][1];for(var r=0;r<this.strong_relist.length;r++){var i=this.strong_relist[r][0];var s=this.strong_relist[r][1];var o=[];for(var u=0;u<this.em_strong_relist.length;u++){var a=this.em_strong_relist[u][0];var f=this.em_strong_relist[u][1];if(t+i==a){o.push(f)}}o.push(n);o.push(s);var l=new RegExp("("+o.join("|")+")");this.em_strong_prepared_relist["rx_"+t+i]=l}}};Markdown_Parser.prototype.doItalicsAndBold=function(e){var t="";var n="";var r=false;var i=[""];var s=[];var o="";while(1){var u=this.em_strong_prepared_relist["rx_"+t+n];var a=e.match(u);if(a){var f=RegExp.leftContext;var l=RegExp.rightContext;var c="";var h=a[1];for(var p=2;p<a.length;p+=2){if("undefined"!==typeof a[p]&&a[p]!=""){c=a[p];h=a[p+1];break}}i[0]+=f+c;o=h;e=l}else{i[0]+=e;o="";e=""}if(o==""){while(s.length>0&&s[0].length>0){i[1]+=s.shift();var d=i.shift();i[0]+=d}break}var v,m;var g=o.length;if(r){if(g==3){s.shift();m=i.shift();m=this.runSpanGamut(m);m="<strong><em>"+m+"</em></strong>";i[0]+=this.hashPart(m);t="";n=""}else{s[0]=this._php_str_repeat(o.charAt(0),3-g);v=g==2?"strong":"em";m=i[0];m=this.runSpanGamut(m);m="<"+v+">"+m+"</"+v+">";i[0]=this.hashPart(m);if(v=="strong"){n=""}else{t=""}}r=false}else if(g==3){if(t!=""){for(var y=0;y<2;++y){var b=s.shift();v=b.length==2?"strong":"em";m=i.shift();m=this.runSpanGamut(m);m="<"+v+">"+m+"</"+v+">";i[0]=this.hashPart(m);if(v=="strong"){n=""}else{t=""}}}else{t=o.charAt(0);n=t+t;s.unshift(o);i.unshift("");r=true}}else if(g==2){if(n!=""){if(s[0].length==1){i[1]+=s.shift();var d=i.shift();i[0]+=d}s.shift();m=i.shift();m=this.runSpanGamut(m);m="<strong>"+m+"</strong>";i[0]+=this.hashPart(m);n=""}else{s.unshift(o);i.unshift("");n=o}}else{if(t!=""){if(s[0].length==1){s.shift();m=i.shift();m=this.runSpanGamut(m);m="<em>"+m+"</em>";i[0]+=this.hashPart(m);t=""}else{i[0]+=o}}else{s.unshift(o);i.unshift("");t=o}}}return i[0]};Markdown_Parser.prototype.doBlockQuotes=function(e){var t=this;e=e.replace(new RegExp("("+"(?:"+"^[ ]*>[ ]?"+".+\\n"+"(.+\\n)*"+"\\n*"+")+"+")","mg"),function(e,n){n=n.replace(/^[ ]*>[ ]?|^[ ]+$/mg,"");n=t.runBlockGamut(n);n=n.replace(/^/mg,"  ");n=n.replace(/(\\s*<pre>[\\s\\S]+?<\/pre>)/mg,function(e,t){t=t.replace(/^  /m,"");return t});return"\n"+t.hashBlock("<blockquote>\n"+n+"\n</blockquote>")+"\n\n"});return e};Markdown_Parser.prototype.formParagraphs=function(e){e=this.__wrapSTXETX__(e);e=e.replace(/(?:\x02)\n+|\n+(?:\x03)/g,"");e=this.__unwrapSTXETX__(e);var t=e.split(/\n{2,}/m);for(var n=0;n<t.length;n++){var r=t[n];if(r==""){}else if(!r.match(/^B\x1A[0-9]+B$/)){r=this.runSpanGamut(r);r=r.replace(/^([ ]*)/,"<p>");r+="</p>";t[n]=this.unhash(r)}else{var i=r;var s=this.html_hashes[i];i=s;t[n]=i}}return t.join("\n\n")};Markdown_Parser.prototype.encodeAttribute=function(e){e=this.encodeAmpsAndAngles(e);e=e.replace(/"/g,"&quot;");return e};Markdown_Parser.prototype.encodeAmpsAndAngles=function(e){if(this.no_entities){e=e.replace(/&/g,"&")}else{e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/,"&")}e=e.replace(/</g,"&lt;");return e};Markdown_Parser.prototype.doAutoLinks=function(e){var t=this;e=e.replace(/<((https?|ftp|dict):[^'">\s]+)>/i,function(e,n){var r=t.encodeAttribute(n);var i='<a href="'+r+'">'+r+"</a>";return t.hashPart(i)});e=e.replace(new RegExp("<"+"(?:mailto:)?"+"("+"(?:"+"[-!#$%&'*+/=?^_`.{|}~\\w\\x80-\\xFF]+"+"|"+'".*?"'+")"+"\\@"+"(?:"+"[-a-z0-9\\x80-\\xFF]+(\\.[-a-z0-9\\x80-\\xFF]+)*\\.[a-z]+"+"|"+"\\[[\\d.a-fA-F:]+\\]"+")"+")"+">","i"),function(e,n){var r=t.encodeEmailAddress(n);return t.hashPart(r)});return e};Markdown_Parser.prototype.encodeEmailAddress=function(e){function n(e){var n=0;n=n^-1;for(var r=0;r<e.length;++r){var i=(n^e.charCodeAt(r))&255;var s="0x"+t[i];n=n>>>8^s}return(n^-1)>>>0}if("undefined"===typeof arguments.callee.crctable){arguments.callee.crctable="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 "+"0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 "+"1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 "+"136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 "+"3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B "+"35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 "+"26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F "+"2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D "+"76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 "+"7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 "+"6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 "+"65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 "+"4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB "+"4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 "+"5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F "+"5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD "+"EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 "+"E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 "+"F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 "+"FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 "+"D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B "+"D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 "+"CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F "+"C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D "+"9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 "+"95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 "+"86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 "+"88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 "+"A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB "+"AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 "+"BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF "+"B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".split(" ")}var t=arguments.callee.crctable;e="mailto:"+e;var r=[];var i;for(i=0;i<e.length;i++){r.push(e.charAt(i))}var s=Math.floor(Math.abs(n(e)/e.length));for(i=0;i<r.length;i++){var o=r[i];var u=o.charCodeAt(0);if(u<128){var a=s*(1+i)%100;if(a>90&&o!="@"){}else if(a<45){r[i]="&#x"+u.toString(16)+";"}else{r[i]="&#"+u.toString(10)+";"}}}e=r.join("");var f=r.splice(7,r.length-1).join("");e='<a href="'+e+'">'+f+"</a>";return e};Markdown_Parser.prototype.parseSpan=function(e){var t="";var n=new RegExp("("+"\\\\"+this.escape_chars_re+"|"+"`+"+(this.no_markup?"":"|"+"<!--.*?-->"+"|"+"<\\?.*?\\?>|<%.*?%>"+"|"+"<[/!$]?[-a-zA-Z0-9:_]+"+"(?:"+"\\s"+"(?:[^\"'>]+|\"[^\"]*\"|'[^']*')*"+")?"+">")+")");while(1){var r=e.match(n);if(r){if(RegExp.leftContext){t+=RegExp.leftContext}if(RegExp.lastMatch.charAt(0)=="`"&&RegExp.leftContext.charAt(RegExp.leftContext.length-1)=="\\"){t+=RegExp.lastMatch;e=RegExp.rightContext;continue}var i=this.handleSpanToken(RegExp.lastMatch,RegExp.rightContext);t+=i[0];e=i[1]}else{t+=e;break}}return t};Markdown_Parser.prototype.handleSpanToken=function(e,t){switch(e.charAt(0)){case"\\":return[this.hashPart("&#"+e.charCodeAt(1)+";"),t];case"`":if(t.match(new RegExp("^([\\s\\S]*?[^`])"+this._php_preg_quote(e)+"(?!`)([\\s\\S]*)$","m"))){var n=RegExp.$1;t=RegExp.$2;var r=this.makeCodeSpan(n);return[this.hashPart(r),t]}return[e,t];default:return[this.hashPart(e),t]}};Markdown_Parser.prototype.outdent=function(e){return e.replace(new RegExp("^(\\t|[ ]{1,"+this.tab_width+"})","mg"),"")};Markdown_Parser.prototype.detab=function(e){var t=this;return e.replace(/^.*\t.*$/mg,function(e){var n=e.split("	");e=n.shift();for(var r=0;r<n.length;r++){var i=n[r];var s=t.tab_width-e.length%t.tab_width;e+=t._php_str_repeat(" ",s)+i}return e})};Markdown_Parser.prototype.unhash=function(e){var t=this;return e.replace(/(.)\x1A[0-9]+\1/g,function(e){return t.html_hashes[e]})};MarkdownExtra_Parser.prototype=new Markdown_Parser;MarkdownExtra_Parser.prototype.setup=function(){this.constructor.prototype.setup.call(this);this.footnotes={};this.footnotes_ordered=[];this.abbr_desciptions={};this.abbr_word_re="";this.footnote_counter=1;for(var e in this.predef_abbr){var t=this.predef_abbr[e];if(this.abbr_word_re!=""){this.abbr_word_re+="|"}this.abbr_word_re+=this._php_preg_quote(e);this.abbr_desciptions[e]=this._php_trim(t)}};MarkdownExtra_Parser.prototype.teardown=function(){this.footnotes={};this.footnotes_ordered=[];this.abbr_desciptions={};this.abbr_word_re="";this.constructor.prototype.teardown.call(this)};MarkdownExtra_Parser.prototype.hashHTMLBlocks=function(e){var t=this._hashHTMLBlocks_inMarkdown(e);e=t[0];return e};MarkdownExtra_Parser.prototype._hashHTMLBlocks_inMarkdown=function(e,t,n,r){if("undefined"===typeof t){t=0}if("undefined"===typeof n){n=""}if("undefined"===typeof r){r=false}if(e===""){return["",""]}var i;var s=/(?:^\n?|\n\n)*$/;var o=new RegExp("^"+"([ ]*<!--.*?-->)?"+"[ ]*\\n","m");var u=new RegExp("("+"</?"+"("+this.block_tags_re+"|"+this.context_block_tags_re+"|"+this.clean_tags_re+"|"+"(?!\\s)"+n+")"+"(?:"+"(?=[\\s\"'/a-zA-Z0-9])"+"("+'".*?"|'+"'.*?'|"+".+?"+")*?"+")?"+">"+"|"+"<!--.*?-->"+"|"+"<\\?.*?\\?>|<%.*?%>"+"|"+"<!\\[CDATA\\[.*?\\]\\]>"+"|"+"`+"+(!r?"|"+"(?:^[ ]*\\n|^|\\n[ ]*\\n)"+"[ ]{"+(t+4)+"}[^\\n]*\\n"+"(?="+"(?:[ ]{"+(t+4)+"}[^\\n]*|[ ]*)\\n"+")*"+"|"+"(?:^|\\n)"+"[ ]{0,"+t+"}~~~+[ ]*\\n":"")+")","m");var a=0;var f="";do{var l=e.match(u);var c;if(!l){c=[e]}else{c=[RegExp.leftContext,RegExp.lastMatch,RegExp.rightContext]}if(r){var h=this.hashPart("",":");var p=h+"\n";c[0]=h+c[0].replace(/\n/g,p)+h}f+=c[0];if(!l){e="";break}var d=c[1];e=c[2];var v=this._php_preg_quote(d);var m;var g;if(d.charAt(0)=="`"){v=this._php_preg_quote(d);if(e.substr(1).indexOf("`")!=-1&&(i=e.match(new RegExp("^(.+?|\\n[^\\n])*?[^`]"+v+"[^`]")))){f+=d+i[0];e=e.substr(i[0].length)}else{f+=d}}else if(d.match(new RegExp("^\\n?[ ]{0,"+(t+3)+"}~"))){v=this._php_preg_quote(this._php_trim(d));if(i=e.match(new RegExp("^(?:.*\\n)+?[ ]{0,"+t+"}"+v+"[ ]*\\n"))){f+=d+i[0];e=e.substr(i[0].length)}else{f+=d}}else if(d.charAt(0)=="\n"||d.charAt(0)==" "){f+=d}else if(d.match(new RegExp("^<(?:"+this.block_tags_re+")\\b"))||d.match(new RegExp("^<(?:"+this.context_block_tags_re+")\\b"))&&f.match(s)&&e.match(o)){m=this._hashHTMLBlocks_inHTML(d+e,this.hashBlock,true);g=m[0];e=m[1];f+="\n\n"+g+"\n\n"}else if(d.match(new RegExp("^<(?:"+this.clean_tags_re+")\\b"))||d.charAt(1)=="!"||d.charAt(1)=="?"){m=this._hashHTMLBlocks_inHTML(d+e,this.hashClean,false);g=m[0];e=m[1];f+=g}else if(n!==""&&d.match(new RegExp("^</?(?:"+n+")\\b"))){if(d.charAt(1)=="/")a--;else if(d.charAt(d.length-2)!="/")a++;if(a<0){e=d+e;break}f+=d}else{f+=d}}while(a>=0);return[f,e]};MarkdownExtra_Parser.prototype._hashHTMLBlocks_inHTML=function(e,t,n){if(e==="")return["",""];var r;var i=new RegExp("\\s*"+"markdown"+"\\s*=\\s*"+"(?:"+"([\"'])"+"(.*?)"+"\\1"+"|"+"([^\\s>]*)"+")"+"()");var s=new RegExp("("+"</?"+"[\\w:$]+"+"(?:"+"(?=[\\s\"'/a-zA-Z0-9])"+"(?:"+'".*?"|'+"'.*?'|"+".+?"+")*?"+")?"+">"+"|"+"<!--.*?-->"+"|"+"<\\?.*?\\?>|<%.*?%>"+"|"+"<!\\[CDATA\\[.*?\\]\\]>"+")");var o=e;var u=0;var a="";var f="";var l="";if(r=e.match(/^<([\w:$]*)\b/)){l=r[1]}do{var c=e.match(s);if(!c){return[o.charAt(0),o.substr(1)]}var h=[RegExp.leftContext,RegExp.lastMatch,RegExp.rightContext];a+=h[0];var p=h[1];e=h[2];if(p.match(new RegExp("^</?(?:"+this.auto_close_tags_re+")\\b"))||p.charAt(1)=="!"||p.charAt(1)=="?"){a+=p}else{if(p.match(new RegExp("^</?"+l+"\\b"))){if(p.charAt(1)=="/"){u--}else if(p.charAt(p.length-2)!="/"){u++}}var d;if(n&&(d=p.match(i))&&(d[2]+d[3]).match(/^1|block|span$/)){p=p.replace(i,"");this.mode=d[2]+d[3];var v=this.mode=="span"||this.mode!="block"&&p.match(new RegExp("^<(?:"+this.contain_span_tags_re+")\\b"));var m;if(r=a.match(/(?:^|\n)( *?)(?! ).*?$/)){m=r[1].length}else{m=0}a+=p;f+=t.call(this,a);r=p.match(/^<([\w:$]*)\b/);var g=r[1];var y=this._hashHTMLBlocks_inMarkdown(e,m,g,v);a=y[0];e=y[1];if(m>0){a=a.replace(new RegExp("/^[ ]{1,"+m+"}","m"),"")}if(!v){f+="\n\n"+a+"\n\n"}else{f+=a}a=""}else{a+=p}}}while(u>0);f+=t.call(this,a);return[f,e]};MarkdownExtra_Parser.prototype.hashClean=function(e){return this.hashPart(e,"C")};MarkdownExtra_Parser.prototype.doHeaders=function(e){function n(e){if("undefined"===typeof e||e==""){return""}return' id="'+e+'"'}var t=this;e=e.replace(new RegExp("(^.+?)"+"(?:[ ]+\\{\\#([-_:a-zA-Z0-9]+)\\})?"+"[ ]*\\n(=+|-+)[ ]*\\n+","mg"),function(e,r,i,s){if(s=="-"&&r.match(/^- /)){return e}var o=s.charAt(0)=="="?1:2;var u=n(i);var a="<h"+o+u+">"+t.runSpanGamut(r)+"</h"+o+">";return"\n"+t.hashBlock(a)+"\n\n"});e=e.replace(new RegExp("^(\\#{1,6})"+"[ ]*"+"(.+?)"+"[ ]*"+"\\#*"+"(?:[ ]+\\{\\#([-_:a-zA-Z0-9]+)\\})?"+"\\n+","mg"),function(e,r,i,s){var o=r.length;var u=n(s);var a="<h"+o+u+">"+t.runSpanGamut(i)+"</h"+o+">";return"\n"+t.hashBlock(a)+"\n\n"});return e};MarkdownExtra_Parser.prototype.doTables=function(e){var t=this;var n=this.tab_width-1;var r=function(e,n,r,i){n=n.replace(/[|] *$/m,"");r=r.replace(/[|] *$/m,"");i=i.replace(/[|] *$/m,"");var s=[];var o=r.split(/[ ]*[|][ ]*/);var u;for(u=0;u<o.length;u++){var a=o[u];if(a.match(/^ *-+: *$/)){s[u]=' align="right"'}else if(a.match(/^ *:-+: *$/)){s[u]=' align="center"'}else if(a.match(/^ *:-+ *$/)){s[u]=' align="left"'}else{s[u]=""}}n=t.parseSpan(n);var f=n.split(/ *[|] */);var l=f.length;var c="<table>\n";c+="<thead>\n";c+="<tr>\n";for(u=0;u<f.length;u++){var h=f[u];c+="  <th"+s[u]+">"+t.runSpanGamut(t._php_trim(h))+"</th>\n"}c+="</tr>\n";c+="</thead>\n";var p=t._php_trim(i,"\n").split("\n");c+="<tbody>\n";for(var d=0;d<p.length;d++){var v=p[d];v=t.parseSpan(v);var m=v.split(/ *[|] */,l);while(m.length<l){m.push("")}c+="<tr>\n";for(u=0;u<m.length;u++){var g=m[u];c+="  <td"+s[u]+">"+t.runSpanGamut(t._php_trim(g))+"</td>\n"}c+="</tr>\n"}c+="</tbody>\n";c+="</table>";return t.hashBlock(c)+"\n"};e=this.__wrapSTXETX__(e);e=e.replace(new RegExp("^"+"[ ]{0,"+n+"}"+"[|]"+"(.+)\\n"+"[ ]{0,"+n+"}"+"[|]([ ]*[-:]+[-| :]*)\\n"+"("+"(?:"+"[ ]*"+"[|].*\\n"+")*"+")"+"(?=\\n|\\x03)","mg"),function(e,t,n,i){i=i.replace(/^ *[|]/m,"");return r.call(this,e,t,n,i)});e=e.replace(new RegExp("^"+"[ ]{0,"+n+"}"+"(\\S.*[|].*)\\n"+"[ ]{0,"+n+"}"+"([-:]+[ ]*[|][-| :]*)\\n"+"("+"(?:"+".*[|].*\\n"+")*"+")"+"(?=\\n|\\x03)","mg"),r);e=this.__unwrapSTXETX__(e);return e};MarkdownExtra_Parser.prototype.doDefLists=function(e){var t=this;var n=this.tab_width-1;var r="(?:"+"("+"("+"[ ]{0,"+n+"}"+"((?:[ \\t]*\\S.*\\n)+)"+"\\n?"+"[ ]{0,"+n+"}:[ ]+"+")"+"([\\s\\S]+?)"+"("+"(?=\\0x03)"+"|"+"(?="+"\\n{2,}"+"(?=\\S)"+"(?!"+"[ ]{0,"+n+"}"+"(?:\\S.*\\n)+?"+"\\n?"+"[ ]{0,"+n+"}:[ ]+"+")"+"(?!"+"[ ]{0,"+n+"}:[ ]+"+")"+")"+")"+")"+")";e=this.__wrapSTXETX__(e);e=e.replace(new RegExp("(\\x02\\n?|\\n\\n)"+r,"mg"),function(e,n,r){var i=t._php_trim(t.processDefListItems(r));i="<dl>\n"+i+"\n</dl>";return n+t.hashBlock(i)+"\n\n"});e=this.__unwrapSTXETX__(e);return e};MarkdownExtra_Parser.prototype.processDefListItems=function(e){var t=this;var n=this.tab_width-1;e=this.__wrapSTXETX__(e);e=e.replace(/\n{2,}(?=\\x03)/,"\n");e=e.replace(new RegExp("(\\x02\\n?|\\n\\n+)"+"("+"[ ]{0,"+n+"}"+"(?![:][ ]|[ ])"+"(?:\\S.*\\n)+?"+")"+"(?=\\n?[ ]{0,3}:[ ])","mg"),function(e,n,r){var i=t._php_trim(r).split("\n");var s="";for(var o=0;o<i.length;o++){var u=i[o];u=t.runSpanGamut(t._php_trim(u));s+="\n<dt>"+u+"</dt>"}return s+"\n"});e=e.replace(new RegExp("\\n(\\n+)?"+"("+"[ ]{0,"+n+"}"+"[:][ ]+"+")"+"([\\s\\S]+?)"+"(?=\\n*"+"(?:"+"\\n[ ]{0,"+n+"}[:][ ]|"+"<dt>|\\x03"+")"+")","mg"),function(e,n,r,i){if(n||i.match(/\n{2,}/)){i=t._php_str_repeat(" ",r.length)+i;i=t.runBlockGamut(t.outdent(i+"\n\n"));i="\n"+i+"\n"}else{i=t._php_rtrim(i);i=t.runSpanGamut(t.outdent(i))}return"\n<dd>"+i+"</dd>\n"});e=this.__unwrapSTXETX__(e);return e};MarkdownExtra_Parser.prototype.doFencedCodeBlocks=function(e){var t=this;var n=this.tab_width;e=this.__wrapSTXETX__(e);e=e.replace(new RegExp("(?:\\n|\\x02)"+"("+"~{3,}"+")"+"[ ]*\\n"+"("+"(?:"+"(?!\\1[ ]*\\n)"+".*\\n+"+")+"+")"+"\\1[ ]*\\n","mg"),function(e,n,r){r=t._php_htmlspecialchars_ENT_NOQUOTES(r);r=r.replace(/^\n+/,function(e){return t._php_str_repeat("<br"+t.empty_element_suffix,e.length)});r="<pre><code>"+r+"</code></pre>";return"\n\n"+t.hashBlock(r)+"\n\n"});e=this.__unwrapSTXETX__(e);return e};MarkdownExtra_Parser.prototype.formParagraphs=function(e){e=this.__wrapSTXETX__(e);e=e.replace(/(?:\x02)\n+|\n+(?:\x03)/g,"");e=this.__unwrapSTXETX__(e);var t=e.split(/\n{2,}/m);for(var n=0;n<t.length;n++){var r=t[n];if(r==""){continue}r=this._php_trim(this.runSpanGamut(r));var i=!r.match(/^B\x1A[0-9]+B|^C\x1A[0-9]+C$/);if(i){r="<p>"+r+"</p>"}t[n]=r}e=t.join("\n\n");e=this.unhash(e);return e};MarkdownExtra_Parser.prototype.stripFootnotes=function(e){var t=this;var n=this.tab_width-1;e=e.replace(new RegExp("^[ ]{0,"+n+"}\\[\\^(.+?)\\][ ]?:"+"[ ]*"+"\\n?"+"("+"(?:"+".+"+"|"+"\\n"+"(?!\\[\\^.+?\\]:\\s)"+"(?!\\n+[ ]{0,3}\\S)"+")*"+")","mg"),function(e,n,r){var i=t.fn_id_prefix+n;t.footnotes[i]=t.outdent(r);return""});return e};MarkdownExtra_Parser.prototype.doFootnotes=function(e){if(!this.in_anchor){e=e.replace(/\[\^(.+?)\]/g,"Ffn:$1:")}return e};MarkdownExtra_Parser.prototype.appendFootnotes=function(e){var t=this;var n=function(e,n){var r=t.fn_id_prefix+n;if(r in t.footnotes){t.footnotes_ordered.push([r,t.footnotes[r]]);delete t.footnotes[r];var i=t.footnote_counter++;var s=' rel="footnote"';if(t.fn_link_class!=""){var o=t.fn_link_class;o=t.encodeAttribute(o);s+=' class="'+o+'"'}if(t.fn_link_title!=""){var u=t.fn_link_title;u=t.encodeAttribute(u);s+=' title="'+u+'"'}s=s.replace(/%%/g,i);r=t.encodeAttribute(r);return'<sup id="fnref:'+r+'">'+'<a href="#fn:'+r+'"'+s+">"+i+"</a>"+"</sup>"}return"[^"+n+"]"};e=e.replace(/F\x1Afn:(.*?)\x1A:/g,n);if(this.footnotes_ordered.length>0){e+="\n\n";e+='<div class="footnotes">\n';e+="<hr"+this.empty_element_suffix+"\n";e+="<ol>\n\n";var r=' rev="footnote"';if(this.fn_backlink_class!=""){var i=this.fn_backlink_class;i=this.encodeAttribute(i);r+=' class="'+i+'"'}if(this.fn_backlink_title!=""){var s=this.fn_backlink_title;s=this.encodeAttribute(s);r+=' title="'+s+'"'}var o=0;while(this.footnotes_ordered.length>0){var u=this.footnotes_ordered.shift();var a=u[0];var f=u[1];f+="\n";f=this.runBlockGamut(f+"\n");f=f.replace(/F\x1Afn:(.*?)\x1A:/g,n);r=r.replace(/%%/g,++o);a=this.encodeAttribute(a);var l='<a href="#fnref:'+a+'"'+r+">&#8617;</a>";if(f.match(/<\/p>$/)){f=f.substr(0,f.length-4)+"&#160;"+l+"</p>"}else{f+="\n\n<p>"+l+"</p>"}e+='<li id="fn:'+a+'">\n';e+=f+"\n";e+="</li>\n\n"}e+="</ol>\n";e+="</div>"}return e};MarkdownExtra_Parser.prototype.stripAbbreviations=function(e){var t=this;var n=this.tab_width-1;e=e.replace(new RegExp("^[ ]{0,"+n+"}\\*\\[(.+?)\\][ ]?:"+"(.*)","mg"),function(e,n,r){if(t.abbr_word_re!=""){t.abbr_word_re+="|"}t.abbr_word_re+=t._php_preg_quote(n);t.abbr_desciptions[n]=t._php_trim(r);return""});return e};MarkdownExtra_Parser.prototype.doAbbreviations=function(e){var t=this;if(this.abbr_word_re){e=e.replace(new RegExp("(^|[^\\w\\x1A])"+"("+this.abbr_word_re+")"+"(?![\\w\\x1A])","g"),function(e,n,r){if(r in t.abbr_desciptions){var i=t.abbr_desciptions[r];if(!i||i==""){return t.hashPart(n+"<abbr>"+r+"</abbr>")}else{i=t.encodeAttribute(i);return t.hashPart(n+'<abbr title="'+i+'">'+r+"</abbr>")}}else{return e}})}return e};if(typeof exports!="undefined"){exports.Markdown=Markdown;exports.Markdown_Parser=Markdown_Parser;exports.MarkdownExtra_Parser=MarkdownExtra_Parser}
