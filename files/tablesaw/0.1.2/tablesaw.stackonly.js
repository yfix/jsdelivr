/*! Tablesaw - v0.1.2 - 2014-05-14
* https://github.com/filamentgroup/tablesaw
* Copyright (c) 2014 Filament Group; Licensed MIT */
!function(a){var b="table",c={toolbar:"tablesaw-bar"},d={create:"tablesawcreate",destroy:"tablesawdestroy"},e="stack",f="table[data-mode],table[data-sortable]",g=function(b){if(!b)throw new Error("Tablesaw requires an element.");this.table=b,this.$table=a(b),this.mode=this.$table.attr("data-mode")||e,this.init()};g.prototype.init=function(){this.$table.attr("id")||this.$table.attr("id",b+"-"+Math.round(1e4*Math.random())),this.createToolbar();var c,e=this.table.querySelectorAll("thead tr"),f=this;a(e).each(function(){var b=0;a(this).children().each(function(){var d=parseInt(this.getAttribute("colspan"),10),g=":nth-child("+(b+1)+")";if(c=b+1,d)for(var h=0;d-1>h;h++)b++,g+=", :nth-child("+(b+1)+")";this.cells=f.$table.find("tr").not(a(e).eq(0)).not(this).children(g),b++})}),this.$table.trigger(d.create,[this.mode,c])},g.prototype.createToolbar=function(){var b=this.$table.prev("."+c.toolbar);b.length||(b=a("<div>").addClass(c.toolbar).insertBefore(this.$table)),this.$toolbar=b,this.mode&&this.$toolbar.addClass("mode-"+this.mode)},g.prototype.destroy=function(){this.$table.prev("."+c.toolbar).each(function(){this.className=this.className.replace(/\bmode\-\w*\b/gi,"")}),a(window).off("resize."+this.$table.attr("id")),this.$table.trigger(d.destroy,[this.mode]),this.$table.removeAttr("data-mode"),this.$table.removeData(b)},a.fn[b]=function(){return this.each(function(){var c=a(this);if(!c.data(b)){var d=new g(this);c.data(b,d)}})},a(document).on("enhance.tablesaw",function(c){a(c.target).find(f)[b]()})}(jQuery),function(a,b){var d={stackTable:"tablesaw-stack",cellLabels:"tablesaw-cell-label"},e={obj:"tablesaw-stack"},f={labelless:"data-no-labels"},g=function(a){this.$table=b(a),this.labelless=this.$table.is("["+f.labelless+"]"),this.labelless||(this.allHeaders=this.$table.find("th")),this.$table.data(e.obj,this)};g.prototype.init=function(a){if(this.$table.addClass(d.stackTable),!this.labelless){var c=b(this.allHeaders);c.each(function(){var c=b(this.cells),e=c.not(this).filter("thead th").length&&" tablesaw-cell-label-top",f=b(this).text();if(""!==f)if(e){var g=parseInt(b(this).attr("colspan"),10),h="";g&&(h="td:nth-child("+g+"n + "+a+")"),c.filter(h).prepend("<b class='"+d.cellLabels+e+"'>"+f+"</b>")}else c.prepend("<b class='"+d.cellLabels+"'>"+f+"</b>")})}},g.prototype.destroy=function(){this.$table.removeClass(d.stackTable),this.$table.find("."+d.cellLabels).remove()},b(document).on("tablesawcreate","table",function(a,b,c){if("stack"===b){var d=new g(this);d.init(c)}}),b(document).on("tablesawdestroy","table",function(a,c){"stack"===c&&b(this).data(e.obj).destroy()})}(this,jQuery);