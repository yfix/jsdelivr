/*!
 * Globalize v1.0.0-alpha.5 2014-08-19T00:47Z Released under the MIT license
 * http://git.io/TrdQbw
 */
!function(a,b){"function"==typeof define&&define.amd?define(["cldr","../globalize","cldr/event"],b):"object"==typeof exports?module.exports=b(require("cldrjs"),require("globalize")):b(a.Cldr,a.Globalize)}(this,function(a,b){var c=b._validateCldr,d=b._validateDefaultLocale,e=b._validatePresence,f=b._validateRange,g=b._validateType,h=b._validateTypePlainObject,i=function(a,b){g(a,b,"undefined"==typeof a||"number"==typeof a,"Number")},j=function(a,b){g(a,b,"undefined"==typeof a||"string"==typeof a,"a string")},k=function(a,b,c){var d,e=b,f="",g=",",h=c?!0:!1;for(a=String(a).split("."),d=a[0].length;d>e;)f=a[0].slice(d-e,d)+(f.length?g:"")+f,d-=e,h&&(e=c,h=!1);return a[0]=a[0].slice(0,d)+(f.length?g:"")+f,a.join(".")},l=function(a){return isNaN(a)?0/0:Math[0>a?"ceil":"floor"](a)},m=function(a,b,c){var d;for("string"!=typeof a&&(a=String(a)),d=a.length;b>d;d+=1)a=c?a+"0":"0"+a;return a},n=function(a,b,c,d,e,f){return d?(a=f?e(a,f):e(a,Math.pow(10,-d)),a=+a.toFixed(d),c&&(a=String(a).split("."),a[1]=m(a[1]||"",c,!0),a=a.join("."))):a=l(a),a=String(a),b&&(a=a.split("."),a[0]=m(a[0],b),a=a.join(".")),a},o=function(a,b,c){var d,e;return a=a.toPrecision(b+2),d=Math.ceil(Math.log(Math.abs(a))/Math.log(10)),d-=b,e=Math.pow(10,d),a=c(a,e),0>d&&(a=+a.toFixed(-d)),a},p=function(a,b,c,d){var e,f;if(b>c&&(c=b),e=o(a,b,d),f=o(a,c,d),a=+e===+f?e:f,a=(+a).toString(10),/e/.test(a))throw new Error("Ops! Integers out of (1e21, 1e-7) not supported");return b-a.replace(/^0+|\./g,"").length>0&&(a=a.split("."),a[1]=m(a[1]||"",b-a[0].replace(/^0+/,"").length,!0),a=a.join(".")),a},q=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,r=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,r,s,t;if(a=a.match(q),!a)throw new Error("Invalid pattern: "+a);if(m=a[1],l=a[3],e=a[4],s=a[8],p=a[9],t=a[10],s?s.replace(/(@+)(#*)/,function(a,b,c){k=b.length,h=k+c.length}):(d=a[7],f=a[6],d&&(d.replace(/[0-9]+/,function(a){i=a}),i?(o=+("0."+i),i=i.length):i=0,g=d.length-1),f.replace(/0+$/,function(a){j=a.length})),p)throw new Error("Scientific notation not implemented");if(l)throw new Error("Padding not implemented");return-1!==(b=e.lastIndexOf(","))&&(c=e.split(".")[0],n=c.length-b-1,-1!==(c=e.lastIndexOf(",",b-1))&&(r=b-1-c)),[m,l,j,i,g,k,h,o,n,r,t]},s=function(a){return a.main("numbers/defaultNumberingSystem")},t=function(a,b){return b.main(["numbers/symbols-numberSystem-"+s(b),a])},u={".":"decimal",",":"group","%":"percentSign","+":"plusSign","-":"minusSign",E:"exponential","‰":"perMille"},v=function(a){return a=a||"round",a="truncate"===a?l:Math[a],function(b,c){return c=c||1,a(b/c)*c}},w=function(a,b,c,d){function e(a,b){return a in d?d[a]:b}var g,h,i,j,l,m,o,q,s,w,x,y,z,A;if(isNaN(a))return t("nan",c);if(b=b.split(";"),d=d||{},x=v(d.round),s=r(b[0]),m=s[1],j=e("minimumIntegerDigits",s[2]),j=e("minimumIntegerDigits",s[2]),i=e("minimumFractionDigits",s[3]),g=e("maximumFractionDigits",s[4]),l=e("minimumSignificantDigits",s[5]),h=e("maximumSignificantDigits",s[6]),y=s[7],q=s[8],z=s[9],0>a?(b=b[1]||"-"+b[0],s=r(b)):b=b[0],o=s[0],A=s[10],!isFinite(a))return o+t("infinity",c)+A;if(w=o,-1!==b.indexOf("%")?a*=100:-1!==b.indexOf("‰")&&(a*=1e3),isNaN(l*h)){if(!isNaN(l)||!isNaN(h))throw new Error("None or both the minimum and maximum significant digits must be present");"minimumFractionDigits"in d&&!("maximumFractionDigits"in d)?g=Math.max(i,g):!("minimumFractionDigits"in d)&&"maximumFractionDigits"in d&&(i=Math.min(i,g)),f(j,"minimumIntegerDigits",1,21),f(i,"minimumFractionDigits",0,20),f(g,"maximumFractionDigits",i,20),a=n(a,j,i,g,x,y)}else f(l,"minimumSignificantDigits",1,21),f(h,"maximumSignificantDigits",l,21),a=p(a,l,h,x);return a=a.replace(/^-/,""),!q||"useGrouping"in d&&!d.useGrouping||(a=k(a,q,z)),w+=a,w+=A,w.replace(/'[^']+'|[.,\-+E%\u2030]/g,function(a){return"'"===a.charAt(0)?a:t(u[a],c)})},x=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)(E[+-]?[0-9]+)?([^0-9]*)$/,y=function(a){var b,c={};for(b in u)c[t(u[b],a)]=b;return c},z=function(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},A=function(a,b,c){var d,e,f,g,h,i,j;if(d=a.match(t("infinity",c)))f=1/0,g=a.slice(0,d.length),i=a.slice(d.length+1);else{if(j=y(c),e=new RegExp(Object.keys(j).map(function(a){return z(a)}).join("|"),"g"),a=a.replace(e,function(a){return j[a]}),a=a.match(x),!a)return 0/0;if(g=a[1],i=a[6],f=a[2].replace(/,/g,""),a[5]&&(f+=a[5]),f=+f,isNaN(f))return 0/0;-1!==a[0].indexOf("%")?f/=100:-1!==a[0].indexOf("‰")&&(f/=1e3)}return b=b.split(";"),h=r(b[1]||b[0]),g===(b[1]?"":"-")+h[0]&&i===h[10]&&(f*=-1),f},B=function(a,b){if("decimal"!==a&&"percent"!==a)throw new Error("Invalid style");return b.main(["numbers",a+"Formats-numberSystem-"+s(b),"standard"])};return b.formatNumber=b.prototype.formatNumber=function(a,b){var f,g,j;return e(a,"value"),i(a,"value"),h(b,"attributes"),b=b||{},f=this.cldr,d(f),f.on("get",c),b.pattern||(g=B(b.style||"decimal",f)),j=w(a,g,f,b),f.off("get",c),j},b.parseNumber=b.prototype.parseNumber=function(a){var b,f,g;return e(a,"value"),j(a,"value"),b=this.cldr,d(b),b.on("get",c),f=B(-1!==a.indexOf("%")?"percent":"decimal",b),g=A(a,f,b),b.off("get",c),g},b});